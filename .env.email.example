# ─── MongoDB (same as your App Platform API) ─────────────────────
MONGODB_URI=mongodb+srv://user:pass@your-cluster.mongo.ondigitalocean.com/oxy-production?tls=true&authSource=admin&replicaSet=your-replica-set

# ─── Email Domain ─────────────────────────────────────────────────
EMAIL_DOMAIN=oxy.so

# ─── DKIM Signing ─────────────────────────────────────────────────
# Generate with: node packages/api/scripts/generate-dkim.js
DKIM_SELECTOR=default
DKIM_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nYOUR_KEY_HERE\n-----END RSA PRIVATE KEY-----"

# ─── SMTP Server ──────────────────────────────────────────────────
SMTP_ENABLED=true
SMTP_PORT=25
SMTP_HOST=0.0.0.0
SMTP_MAX_MESSAGE_SIZE=26214400

# TLS (Let's Encrypt certs mounted into the container)
SMTP_TLS_KEY=/certs/privkey.pem
SMTP_TLS_CERT=/certs/fullchain.pem

# ─── S3 for Email Attachments ────────────────────────────────────
EMAIL_S3_BUCKET=oxy-email
EMAIL_S3_REGION=ams3
EMAIL_S3_ENDPOINT=https://ams3.digitaloceanspaces.com
EMAIL_S3_ACCESS_KEY_ID=your-spaces-key
EMAIL_S3_SECRET_ACCESS_KEY=your-spaces-secret

# ─── Spam Filtering ──────────────────────────────────────────────
# Rspamd URL is set in docker-compose.email.yml (http://rspamd:11333)
SPAM_FILTER_ENABLED=true
SPAM_THRESHOLD=5.0
SPAM_REJECT_THRESHOLD=15.0

# ─── Outbound Relay (optional) ───────────────────────────────────
# Leave empty for direct delivery (requires port 25 unblocked + PTR record)
# Or use a relay service:
# SMTP_RELAY_HOST=smtp.sendgrid.net
# SMTP_RELAY_PORT=587
# SMTP_RELAY_USER=apikey
# SMTP_RELAY_PASS=your-sendgrid-api-key
